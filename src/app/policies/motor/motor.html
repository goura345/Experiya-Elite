<div class="app-main ms-5">
    <div class="wrapper">
        <div class="page " id="motor_entry">
            <div class="page-inner">
                <div class="ajax-progressBar">
                    <div class="postProgress"></div>
                </div>

                <header class="page-title-bar">
                    <!-- <h3 id="notification">files </h3> -->

                    <!-- <div class="d-flex justify-content-between align-items-center">
                     <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                           <li class="breadcrumb-item active">
                              <a href="list"><i class="breadcrumb-icon fa fa-angle-left mr-2"></i>Back</a>
                           </li>
                        </ol>
                     </nav>
                  </div> -->
                    <div class="row text-center text-sm-left">
                        <div class="col">
                            <h1 id="policy_title" class="page-title"> Motor Policy
                                <small class="text-muted"> All * marks Fields are
                                    mandatory.
                                </small>
                            </h1>
                        </div>
                    </div>
                </header>

                <style>
                    .invalid {
                        /* background: red; */
                        border: 1px solid red;
                    }
                </style>

                <div class="page-section">
                    <div class="section-block">

                        <form *ngIf="!loading" (ngSubmit)="onSubmit()" [formGroup]="form">

                            <div class="row">
                                <div class="col-lg-9 col-md-9 col-sm-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <fieldset>
                                                <legend>Policy Details</legend>
                                                <div class="form-row">
                                                    <div class="col-md-3 mb-4">
                                                        <label>Vehicle Category<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase "
                                                            formControlName="vehicle_catagory"
                                                            placeholder="Select Category"
                                                            [ngClass]="{'invalid': submitted && form.controls['vehicle_catagory'].errors}"
                                                            (change)="addValuesAndValidators()">
                                                            <ng-option *ngFor="let category of vehicleCategories"
                                                                [value]="category">{{ category }}</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Proposal No.<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            style="text-transform: uppercase;"
                                                            placeholder="proposal no." formControlName="proposal_no"
                                                            [ngClass]="{'invalid': submitted && form.controls['proposal_no'].errors}">
                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Policy No.<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            style="text-transform: uppercase;"
                                                            formControlName="policy_no" placeholder="policy no."
                                                            [ngClass]="{'invalid': submitted && form.controls['policy_no'].errors}">
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Insured Name<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            style="text-transform: uppercase;"
                                                            formControlName="customer_name" placeholder="insured name"
                                                            [ngClass]="{'invalid': submitted && form.controls['customer_name'].errors}">
                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Insurer Name<b style="color: red;">*</b></label>
                                                        <ng-select [items]="insurers" bindLabel="comp_name"
                                                            placeholder="SELECT INSURER" bindValue="comp_name"
                                                            formControlName="insurance_company"
                                                            [ngClass]="{'invalid': submitted && form.controls['insurance_company'].errors}">
                                                        </ng-select>


                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Serving Office<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase" formControlName="sp_name"
                                                            placeholder="Select Branch"
                                                            [ngClass]="{'invalid': submitted && form.controls['sp_name'].errors}">
                                                            <ng-option value="ROHTAK">ROHTAK</ng-option>
                                                            <ng-option value="DELHI">DELHI</ng-option>
                                                        </ng-select>

                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Office Code<b style="color: red;">*</b> </label>
                                                        <ng-select class="text-uppercase "
                                                            formControlName="sp_brokercode" placeholder="Select Code"
                                                            [ngClass]="{'invalid': submitted && form.controls['sp_brokercode'].errors}">
                                                            <ng-option value="124001"> 124001</ng-option>
                                                            <ng-option value="110001"> 1100001</ng-option>
                                                        </ng-select>

                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label for="registration_no">Registration No.<b
                                                                style="color: red;">*</b></label>
                                                        <div class="input-group input-group-alt">
                                                            <input type="text" class="form-control text-uppercase"
                                                                placeholder="Registration No."
                                                                formControlName="registration_no"
                                                                [ngClass]="{'invalid': submitted && form.controls['registration_no'].errors}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>RTO State<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase" formControlName="rto_state"
                                                            placeholder="Select State"
                                                            [ngClass]="{'invalid': submitted && form.controls['rto_state'].errors}">
                                                            <!-- <option value="">-- Select State --</option> -->
                                                            <ng-option value="Andama And Nicobar Island">Andama And
                                                                Nicobar
                                                                Island
                                                            </ng-option>
                                                            <ng-option value="Andhra Pradesh">Andhra Pradesh</ng-option>
                                                            <ng-option value="Arunachal Pradesh">Arunachal
                                                                Pradesh</ng-option>
                                                            <ng-option value="Assam">Assam</ng-option>
                                                            <ng-option value="Bihar">Bihar</ng-option>
                                                            <ng-option value="Chandigarh">Chandigarh</ng-option>
                                                            <ng-option value="Chattisgarh">Chattisgarh</ng-option>
                                                            <ng-option value="Daman And Diu">Daman And Diu</ng-option>
                                                            <ng-option value="Delhi">Delhi</ng-option>
                                                            <ng-option value="Goa">Goa</ng-option>
                                                            <ng-option value="Gujrat">Gujrat</ng-option>
                                                            <ng-option value="Haryana">Haryana</ng-option>
                                                            <ng-option value="Himachal Pradesh">Himachal
                                                                Pradesh</ng-option>
                                                            <ng-option value="Jammu And Kashmir">Jammu And
                                                                Kashmir</ng-option>
                                                            <ng-option value="Jharkhand">Jharkhand</ng-option>
                                                            <ng-option value="Karnataka">Karnataka</ng-option>
                                                            <ng-option value="Kerala">Kerala</ng-option>
                                                            <ng-option value="Lakshadweep">Lakshadweep</ng-option>
                                                            <ng-option value="Leh">Leh</ng-option>
                                                            <ng-option value="Madhya Pradesh">Madhya Pradesh</ng-option>
                                                            <ng-option value="Maharashtra">Maharashtra</ng-option>
                                                            <ng-option value="Manipur">Manipur</ng-option>
                                                            <ng-option value="Meghalaya">Meghalaya</ng-option>
                                                            <ng-option value="Mizoram">Mizoram</ng-option>
                                                            <ng-option value="Nagaland">Nagaland</ng-option>
                                                            <ng-option value="NCR">NCR</ng-option>
                                                            <ng-option value="Odisha">Odisha</ng-option>
                                                            <ng-option value="Puducherry">Puducherry</ng-option>
                                                            <ng-option value="Punjab">Punjab</ng-option>
                                                            <ng-option value="Rajasthan">Rajasthan</ng-option>
                                                            <ng-option value="Sikkim">Sikkim</ng-option>
                                                            <ng-option value="Tamil Nadu">Tamil Nadu</ng-option>
                                                            <ng-option value="Telangana">Telangana</ng-option>
                                                            <ng-option value="Tripura">Tripura</ng-option>
                                                            <ng-option value="Uttar Pradesh">Uttar Pradesh</ng-option>
                                                            <ng-option value="Uttrakhand">Uttrakhand</ng-option>
                                                            <ng-option value="West Bengal">West Bengal</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>RTO City<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            formControlName="rto_city" placeholder="RTO City"
                                                            [ngClass]="{'invalid': submitted && form.controls['rto_city'].errors}">
                                                    </div>


                                                    <div class="col-md-3 mb-4">
                                                        <label>Vehicle Make<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase"
                                                            formControlName="vehicle_makeby" placeholder="Select Make"
                                                            [ngClass]="{'invalid': submitted && form.controls['vehicle_makeby'].errors}">
                                                            @for (item of makes$; track $index) {
                                                            <ng-option value="{{item.make}}"> {{ item.make
                                                                }}</ng-option>
                                                            }
                                                        </ng-select>
                                                    </div>


                                                    <div class="col-md-3 mb-4">
                                                        <label>Vehicle Model<b style="color: red;">*</b></label>
                                                        <ng-select class="custom text-uppercase"
                                                            formControlName="vehicle_model" placeholder="Select Model"
                                                            [ngClass]="{'invalid': submitted && form.controls['vehicle_model'].errors}">
                                                            @for (item of models$; track $index) {
                                                            <ng-option value="{{item.model}}"> {{ item.model
                                                                }}</ng-option>
                                                            }
                                                        </ng-select>
                                                    </div>


                                                    <div class="col-md-3 mb-4">
                                                        <label>Vehicle Fuel Type<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase "
                                                            formControlName="vehicle_fuel_type"
                                                            placeholder="Select Fuel Type"
                                                            [ngClass]="{'invalid': submitted && form.controls['vehicle_fuel_type'].errors}">
                                                            <ng-option value="PETROL">PETROL</ng-option>
                                                            <ng-option value="DIESEL">DIESEL</ng-option>
                                                            <ng-option value="CNG">CNG</ng-option>
                                                            <ng-option value="ELECTRIC">ELECTRIC</ng-option>
                                                        </ng-select>
                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Manufacture Year<b style="color: red;">*</b></label>
                                                        <ng-select class="custom text-uppercase"
                                                            formControlName="mfg_year" placeholder="Select Year"
                                                            [ngClass]="{'invalid': submitted && form.controls['mfg_year'].errors}">
                                                            <ng-option value="2025">2025</ng-option>
                                                            <ng-option value="2024">2024</ng-option>
                                                            <ng-option value="2023">2023</ng-option>
                                                            <ng-option value="2022">2022</ng-option>
                                                            <ng-option value="2021">2021</ng-option>
                                                            <ng-option value="2020">2020</ng-option>
                                                            <ng-option value="2019">2019</ng-option>
                                                            <ng-option value="2018">2018</ng-option>
                                                            <ng-option value="2017">2017</ng-option>
                                                            <ng-option value="2016">2016</ng-option>
                                                            <ng-option value="2015">2015</ng-option>
                                                            <ng-option value="2014">2014</ng-option>
                                                            <ng-option value="2013">2013</ng-option>
                                                            <ng-option value="2012">2012</ng-option>
                                                            <ng-option value="2011">2011</ng-option>
                                                            <ng-option value="2010">2010</ng-option>
                                                            <ng-option value="2009">2009</ng-option>
                                                            <ng-option value="2008">2008</ng-option>
                                                            <ng-option value="2007">2007</ng-option>
                                                            <ng-option value="2006">2006</ng-option>
                                                            <ng-option value="2005">2005</ng-option>
                                                            <ng-option value="2004">2004</ng-option>
                                                            <ng-option value="2003">2003</ng-option>
                                                            <ng-option value="2002">2002</ng-option>
                                                            <ng-option value="2001">2001</ng-option>
                                                        </ng-select>
                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>Addon<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " placeholder="Select Addon"
                                                            formControlName="addon"
                                                            [ngClass]="{'invalid': submitted && form.controls['addon'].errors}">
                                                            <!-- <ng-option value="" hidden>-- Select Addon --</ng-option> -->
                                                            <ng-option value="YES">YES</ng-option>
                                                            <ng-option value="NO">NO</ng-option>
                                                        </ng-select>
                                                    </div>
                                                    <div class="col-md-3 mb-4">
                                                        <label>NCB<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " formControlName="ncb"
                                                            placeholder="Select NCB"
                                                            [ngClass]="{'invalid': submitted && form.controls['ncb'].errors}">
                                                            <ng-option value="YES">YES</ng-option>
                                                            <ng-option value="NO">NO</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4" [hidden]="cubicCapacities.length === 0">
                                                        <label>Cubic Capacity<b style="color: red;">*</b></label>
                                                        <ng-select class=" text-uppercase " [items]="cubicCapacities"
                                                            formControlName="cubic_capacity"
                                                            placeholder="Select Capacity"
                                                            [ngClass]="{'invalid': submitted && form.controls['cubic_capacity'].errors}">
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4" [hidden]="coverageTypes.length === 0">
                                                        <label>Coverage Type<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " [items]="coverageTypes"
                                                            formControlName="coverage_type"
                                                            placeholder="Select Coverage"
                                                            [ngClass]="{'invalid': submitted && form.controls['coverage_type'].errors}">

                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4" [hidden]="!showSeatingCapacity">
                                                        <label>Seating Capacity<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase "
                                                            formControlName="seating_capacity"
                                                            placeholder="Select Seating"
                                                            [ngClass]="{'invalid': submitted && form.controls['seating_capacity'].errors}">
                                                            <ng-option value="BELOW 5">BELOW 5</ng-option>
                                                            <ng-option value="5-7">5-7</ng-option>
                                                            <ng-option value="7-12">7-12</ng-option>
                                                            <ng-option value="12-18">12-18</ng-option>
                                                            <ng-option value="ABOVE 18">ABOVE 18</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <!-- <div class="col-md-3 mb-4" id="seating_capacityDiv1" hidden>
                                                        <label for="seating_capacity1">Seating Capacity <abbr
                                                                class="text-danger">*</abbr></label><input type="text"
                                                            value="" class="form-control col-lg-6 maskNumField"
                                                            name="seating_capacity1" id="seating_capacity1"
                                                            maxlength="2" formControlName="registration_no">
                                                    </div> -->

                                                    <div class="col-md-3 mb-4" [hidden]="!showGCV">
                                                        <label>GVW<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " formControlName="gvw"
                                                            placeholder="Select GVW"
                                                            [ngClass]="{'invalid': submitted && form.controls['gvw'].errors}">
                                                            <ng-option value="BELOW 2000">BELOW 2000</ng-option>
                                                            <ng-option value="2000-2500">2000-2500</ng-option>
                                                            <ng-option value="2500-3500">2500-3500</ng-option>
                                                            <ng-option value="3500-7000">3500-7000</ng-option>
                                                            <ng-option value="7000-7500">7000-7500</ng-option>
                                                            <ng-option value="7500-12000">7500-12000</ng-option>
                                                            <ng-option value="12000-25000">12000-25000</ng-option>
                                                            <ng-option value="25000-40000">25000-40000</ng-option>
                                                            <ng-option value="ABOVE 40000">ABOVE 40000</ng-option>
                                                        </ng-select>
                                                    </div>


                                                    <div class="col-md-3 mb-4">
                                                        <label>Policy Type<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " formControlName="policy_type"
                                                            placeholder="Select Policy Type"
                                                            [ngClass]="{'invalid': submitted && form.controls['policy_type'].errors}">
                                                            <ng-option value="FRESH">FRESH</ng-option>
                                                            <ng-option value="RENEWAL">RENEWAL</ng-option>
                                                            <ng-option value="ROLLOVER">ROLLOVER</ng-option>
                                                            <ng-option value="ENDORSEMENT">ENDORSEMENT</ng-option>
                                                            <ng-option value="USED VEHICLE">USED VEHICLE</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>CPA<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " formControlName="cpa"
                                                            placeholder="Select CPA"
                                                            [ngClass]="{'invalid': submitted && form.controls['cpa'].errors}">
                                                            <ng-option value="YES">YES</ng-option>
                                                            <ng-option value="NO">NO</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Risk Start Date<b style="color: red;">*</b></label>
                                                        <div class="input-group input-group-alt flatpickr"
                                                            data-toggle="risk_flatpickr" data-wrap="true"
                                                            data-alt-input="true" data-alt-format="F j, Y"
                                                            data-alt-input-class="form-control"
                                                            data-date-format="Y-m-d">

                                                            <input type="date" class="form-control flatpickr-input"
                                                                placeholder="Choose date..."
                                                                formControlName="risk_start_date"
                                                                [ngClass]="{'invalid': submitted && form.controls['risk_start_date'].errors}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Risk End Date<b style="color: red;">*</b></label>
                                                        <div class="input-group input-group-alt flatpickr"
                                                            data-toggle="risk_flatpickr" data-wrap="true"
                                                            data-alt-input="true" data-alt-format="F j, Y"
                                                            data-alt-input-class="form-control"
                                                            data-date-format="Y-m-d">

                                                            <input type="date" class="form-control flatpickr-input"
                                                                placeholder="Choose date..."
                                                                formControlName="risk_end_date"
                                                                [ngClass]="{'invalid': submitted && form.controls['risk_end_date'].errors}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Issued Date<b style="color: red;">*</b></label>
                                                        <div class="input-group input-group-alt flatpickr"
                                                            data-toggle="issue_flatpickr" data-wrap="true"
                                                            data-alt-input="true" ata-alt-format="F j, Y"
                                                            data-alt-input-class="form-control"
                                                            data-date-format="Y-m-d">

                                                            <input type="date"
                                                                class="form-control flatpickr-input black-out"
                                                                placeholder="Choose date..."
                                                                formControlName="issue_date"
                                                                [ngClass]="{'invalid': submitted && form.controls['issue_date'].errors}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Insured Age<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            formControlName="insured_age" placeholder="Insured Age"
                                                            [ngClass]="{'invalid': submitted && form.controls['insured_age'].errors}">
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Policy Term<b style="color: red;">*</b></label>
                                                        <ng-select class="text-uppercase " formControlName="policy_term"
                                                            placeholder="Select Term"
                                                            [ngClass]="{'invalid': submitted && form.controls['policy_term'].errors}">
                                                            <ng-option value="1">1</ng-option>
                                                            <ng-option value="2">2</ng-option>
                                                            <ng-option value="3">3</ng-option>
                                                            <ng-option value="4">4</ng-option>
                                                            <ng-option value="5">5</ng-option>
                                                        </ng-select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>POSP<b style="color: red;">*</b></label>
                                                        <input type="text" data-bs-toggle="modal"
                                                            data-bs-target="#modalPOSP"
                                                            class="form-control text-uppercase " formControlName="pos"
                                                            placeholder="Select POSP" readonly
                                                            [ngClass]="{'invalid': submitted && form.controls['pos'].errors}">

                                                    </div>



                                                    <div class="col-md-3 mb-4">
                                                        <label>BQP<b style="color: red;">*</b></label>
                                                        <select class="custom-select" formControlName="bqp"
                                                            [ngClass]="{'invalid': submitted && form.controls['bqp'].errors}">
                                                            <option value="">-- Select BQP --</option>
                                                            <option value="SATVEER SINGH"> SATVEER SINGH </option>

                                                        </select>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Employee<b style="color: red;">*</b></label>
                                                        <input type="text" class="form-control"
                                                            style="text-transform: uppercase;  background-color: lightgray;"
                                                            formControlName="employee"
                                                            [ngClass]="{'invalid': submitted && form.controls['employee'].errors}">
                                                    </div>


                                                    <div class="col-md-3 mb-4">
                                                        <label>Proposal <small>(Only<strong> PDF &amp; Image
                                                                </strong>File)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="proposal" accept=".pdf,image/"
                                                                id="proposal" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_proposal" name="lbl_proposal"
                                                                class="custom-file-label" for="proposal">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_proposal" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Mandate <small>(Only<strong> PDF &amp; Image
                                                                </strong>File)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="mandate" accept=".pdf,image/"
                                                                id="mandate" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_mandate" name="lbl_mandate"
                                                                class="custom-file-label" for="mandate">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_mandate" href="#"> </a>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Policy <small>(Only<strong> PDF &amp; Image
                                                                </strong>File)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="policy" accept=".pdf,image/"
                                                                id="policy" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_policy" name="lbl_policy"
                                                                class="custom-file-label" for="policy">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_policy" href="#"> </a>
                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Prev. Policy <small>(Only<strong> PDF &amp; Image
                                                                </strong>)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="previous_policy"
                                                                accept=".pdf,image/" id="previous_policy"
                                                                class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_previous_policy" name="lbl_previous_policy"
                                                                class="custom-file-label" for="previous_policy">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_previous_policy" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Pan Card <small>(Only<strong> PDF &amp; Image
                                                                </strong>)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="pan_card" accept=".pdf,image/"
                                                                id="pan_card" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_pan_card" name="lbl_pan_card"
                                                                class="custom-file-label" for="pan_card">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_pan_card" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-3 mb-4">
                                                        <label>Aadhar Card / GST<small>(Only<strong> PDF &amp; Image
                                                                </strong>)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="aadhar_card" accept=".pdf,image/"
                                                                id="aadhar_card" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_aadhar_card" name="lbl_aadhar_card"
                                                                class="custom-file-label" for="aadhar_card">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_aadhar_card" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-4 mb-4">
                                                        <label> Vehicle RC / Invoice<small>(Only<strong> PDF &amp; Image
                                                                </strong>File)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="vehicle_rc" accept=".pdf,image/"
                                                                id="vehicle_rc" class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_vehicle_rc" name="lbl_vehicle_rc"
                                                                class="custom-file-label" for="vehicle_rc">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_vehicle_rc" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-4 mb-4">
                                                        <label>Inspection Report <small>(Only<strong> PDF &amp; Image
                                                                </strong>)</small> </label>
                                                        <div class="custom-file">
                                                            <input type="file" name="inspection_report"
                                                                accept=".pdf,image/" id="inspection_report"
                                                                class="custom-file-input"
                                                                (change)="onFileChange($event)">
                                                            <label id="lbl_inspection_report"
                                                                name="lbl_inspection_report" class="custom-file-label"
                                                                for="inspection_report">Choose
                                                                file</label>
                                                        </div>
                                                        <a id="a_inspection_report" href="#">
                                                        </a>

                                                    </div>

                                                    <div class="col-md-4 mb-4">
                                                        <label for="remark">Remarks <abbr title=""
                                                                class="text-danger">*</abbr></label>
                                                        <input id="remark" type="text" maxlength="255"
                                                            class="form-control" style="text-transform: uppercase;"
                                                            formControlName="remark">
                                                    </div>

                                                </div>

                                            </fieldset>
                                            <p class="mb-4"></p>
                                        </div>
                                        <!-- /.card-body -->
                                    </div>
                                    <!-- /.card -->
                                </div>


                                <div class="col-lg-3 col-md-3 col-sm-12">

                                    <div class="card">

                                        <div class="card-body">
                                            <!-- .card-body -->
                                            <h4 class="card-title mb-3"> Premium Details </h4>
                                            <!-- grid row -->
                                            <div class="row mb-2">
                                                <label class="col-lg-5">OD Premium<b style="color: red;">*</b></label>
                                                <input type="text" (input)="calculatePremiumValues()"
                                                    class="form-control col-lg-6 " formControlName="OD_premium"
                                                    [ngClass]="{'invalid': submitted && form.controls['OD_premium'].errors}">
                                            </div>
                                            <div class="row mb-2">
                                                <label class="col-lg-5">TP/Terrorism<b style="color: red;">*</b></label>
                                                <input type="text" (input)="calculatePremiumValues()"
                                                    class="form-control col-lg-6 " formControlName="TP_terrorism"
                                                    [ngClass]="{'invalid': submitted && form.controls['TP_terrorism'].errors}">

                                            </div>
                                            <div class="row mb-2">
                                                <label class="col-lg-5">Net Premium<b style="color: red;">*</b></label>
                                                <input type="text" class="form-control col-lg-6  bg-light" readonly=""
                                                    tabindex="-1" formControlName="net"
                                                    [ngClass]="{'invalid': submitted && form.controls['net'].errors}">
                                            </div>

                                            <div class="row mb-2">
                                                <label class="col-lg-5">GST 18%<b style="color: red;">*</b></label>
                                                <input type="text" class="form-control col-lg-6 bg-light" readonly
                                                    tabindex="-1" formControlName="gst_amount"
                                                    [ngClass]="{'invalid': submitted && form.controls['gst_amount'].errors}">
                                            </div>

                                            @if (showGCV) {
                                            <div class="row mb-2" id="gsttDiv">
                                                <label class="col-lg-5">GST 12%<b style="color: red;">*</b></label>
                                                <input type="text" class="form-control col-lg-6 bg-light" readonly
                                                    tabindex="-1" formControlName="gst_gcv_amount"
                                                    [ngClass]="{'invalid': submitted && form.controls['gst_gcv_amount'].errors}">
                                            </div>
                                            }

                                            <div class="row mb-2">
                                                <label class="col-lg-5">Total=(Net+GST)<b
                                                        style="color: red;">*</b></label>
                                                <input type="text" class="form-control  col-lg-6 bg-light" readonly=""
                                                    tabindex="-1" formControlName="total"
                                                    [ngClass]="{'invalid': submitted && form.controls['total'].errors}">
                                            </div>


                                            <div class="row mb-2">
                                                <label class="col-lg-5 pr-0 ">Payment <br> Mode<b
                                                        style="color: red;">*</b></label>
                                                <select class="custom-select col-lg-6" formControlName="payment_mode"
                                                    [ngClass]="{'invalid': submitted && form.controls['payment_mode'].errors}">
                                                    <option value=""> -- Select Payment Mode -- </option>
                                                    <option value="ONLINE" selected>ONLINE</option>
                                                    <option value="CHEQUE"> CHEQUE</option>
                                                    <option value="CASH">CASH</option>
                                                </select>
                                            </div>

                                        </div>


                                    </div>

                                </div>

                            </div>

                            <hr>
                            <!-- submit data -->
                            <div class="form-row">
                                <div class="col-md-12 col-sm-12" style="background-color: #346CB0; ">
                                    <div id="payoutSection" class="card card-inverse "
                                        style="background-color: #346CB0;">
                                        <!-- .card -->
                                        <div class="card-header p-2">
                                            <h4 class="card-title mb-1">Payouts</h4>
                                        </div>
                                        <div class="card-body" style="background-color: #346CB0; ">
                                            <p><span class="icofont icofont-hand-right ml-1"></span> The Payout will be
                                                shown as
                                                per the Policy Details</p>
                                            <p><span class="icofont icofont-hand-right ml-1"></span> You can add manual
                                                Payout
                                                after the Policy saved</p>
                                            <div class="text-center">
                                                <button
                                                    style="background-color: #FFFFFF; color: #346CB0; font-weight: bold;"
                                                    type="submit" class="btn w-100p">
                                                    <span *ngIf="submitting"
                                                        class="spinner-border spinner-border-sm me-1"></span>
                                                    GENERATE
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </form>

                    </div>



                </div>

            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modalPOSP" tabindex="-1" aria-labelledby="modalPOSPLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="modalPOSPLabel">
                    Select POSP </h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <span class="mb-1">POSP<b style="color: red;">*</b></span>
                    <ng-select class=" text-uppercase " placeholder="Select POSP" [(ngModel)]="selectedPOSP"  >

                        @for (agent of agents; track $index) {
                        @if (agent.status === 'Active') {
                        <ng-option [value]="agent.posp_code + '|' + agent.full_name">{{
                            agent.posp_code}} | {{
                            agent.full_name}}</ng-option>
                        }
                        }
                    </ng-select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="setPOSP()" data-bs-dismiss="modal">Save
                </button>
            </div>
        </div>
    </div>
</div>